import re

import requests

url = "https://music.163.com/weapi/cloudsearch/get/web?csrf_token=d13774c420694287c317c60970185e47"

headers = {
    "cookie": 'NMTID=00Oqc1fe_12qi1GeE-ArwyC9IJbuncAAAGTfI_4QQ; _iuqxldmzr_=32; WEVNSM=1.0.0; WNMCID=eyrkbu.1732961631031.01.0; WM_TID=se8LpZpLgSVEREUAQBLWDjvglevqr2%2FG; sDeviceId=YD-NrbpIABM7F5AUkBAEEfTFvG%2FjS1k%2BNG3; ntes_utid=tid._.%252FhAfHi%252FqUCNEVwREAQeSGyvxl1VEjHlb._.0; WM_NI=Vi1XwYJXrGzLLgZTa%2FI69c90chxcWWmz6DzEgZQVU323RL4Kji0yKOzX7ZtLi%2FX8yeSuMo%2Fjd7us4ZkKhOPZSjSAO2reRot5E5sAz5%2FXf3PtEPsg76FbPrw7avRI6N%2FQNko%3D; WM_NIKE=9ca17ae2e6ffcda170e2e6eeb4aa53ad8ae5a9e17395ef8fa3d55a869e8f83c2469397ad8ce765e9ec998be12af0fea7c3b92a96b7ffb9f6538a88bea8f94890b996b5e4258beaf784bc3ca1b8b884d65dafa6faa5f94fa5869fb7d839f2ed9eadb741aab7009aca45ba88f9bbf748abf198d9fc6f91ab8390ae62a8e9bb94b752a995a8b0d35291b69da2ce3ab2bb9e90f73f87ebbda2f93fed88aad4d3808790bd88b63e86bea093f63da3aa9eaab546ed8f828cee37e2a3; __snaker__id=blYCT3Q5sr4SKp9Z; gdxidpyhxdE=D6iWM3o4Ce32PYL6%2FzVZ8SgUgtvoIzoP%2BHthMNy%2FhJ9Sj%5C931PwXuHCMuphZUoCm%2FKM4tBhusyd5wOkSkOe3pYvbkXbpvXGmZh%2FcrnjuxMWiTGrrKgJ2gX7Lk2ZyfCf3qEJx%2Fi%5C93SM1Av0YL0zGQDUmjjcvwi2hfGk0PUO%5Ceh2fblUk%3A1735480498851; JSESSIONID-WYYY=%5C0Ri12%5ChJgHJa%5CyGxtwbAWawlC1E8ogzAadhD356qkcynI9YOaWa2MBwKz7lWBowvoFbF82hKGEGCaMuFFm78CbsOX9M8fNyaAqdz9%2FwUM44jQqGd2%2F71%2BBQHx3FBS8clOyIXZ4%5CjBiyfbORR3KFxW2VQceQGX%2BVy0DyAwC2pJKo%5CweX%3A1735481454456; NTES_YD_SESS=n6Hr0qLKSNNQPYaoll1oEzNyzk4PsPK7mhTkiOINDTO1gN.agb3pG9BppAzFeDDkv7ovsceq1DlybTPZWSeD2uS4DMX4aLCgUyi5pbv23S0EPI49VEN_74GDDjIVuV230L8mZ9RlMYclQhNS4S06X0O.t16sRFhW2Klk7zN6Pyslvtk93VJEWcpGrWvSbjRdg27w1pQpWXL4qA1DQAaFhPUK2VFV3JbX1Ce0y9CqOsyfs; S_INFO=1735479909|0|0&60##|18270981072; P_INFO=18270981072|1735479909|1|music|00&99|null&null&null#jix&360700#10#0|&0||18270981072; __remember_me=true; __csrf=d13774c420694287c317c60970185e47; MUSIC_U=00372B1C0700799186C1A1B75D4A339AC3BB8452877CBEFCE398ACC4CBA46FCEE875AAD8AD60AA684D94CB8FFA05DC2E39CD966A27B9CA327363B16DD50C6EFB3A8856AC02F07AC1AC6A7467B5B42C85824FB05B1EEC0A170BE0CD6EA52F7D984E6CC3FD5B09F839D740DDC606E51630CD2D8F57AE8BA27D3E2E0AA2AA44E8D931C28A01DEFD026F1B3D9E0849765E2118C5AD9F3700C60E44AA4A93481D1E7EA58B55D980F04F3E36185BDBE17D3D977EA0316987CCBF84746998C7285F4CDD00F1A7C6AD3E6C9DEDF84B4D6CE30B09D0DA235A78DB5859533C458B55B35B503B30EC5AAA72B53FBD3F3EE3DF0E20D1C659E35AC88615A3EF87D74BF6C26A3A3668A1AC631B31147E15C3783601B3E719E6442BF7EFD96C4FDEB60003AEC7E344530A5ED625BBECA2E34D0ABA6F236E3337EAF6D4181752FD954B2C5358A46C7E185A5C7475A54632AB27A4F45723E43BF4F3B29FC56A0ADE94927045F767BC137225CF5D424FE5220B23399CDD5D82C4; ntes_kaola_ad=1; playerid=99604776;',
    "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36 Edg/131.0.0.0",
    "referer": "https://music.163.com/"
}

data = {
    "params": "2HoiLfCQ40gGjRZcBoxCt7Su8BDST4D4QCwbTw35t7t1Z1L1iBeh4lFk7ETWSd5uXP0UxIfdrmuKr5fyaLdVv621t2AeOaW/69bbtNtqPjYqrd4HfvHCnA5Vksd1AQKJsy2AotubEm+zbbOyXKNMz6nmAMYfwsjp1TwWhLnlX1o8TMd1UGaiGbDNb5AW2NESfs3SdueVDQSbWRFYg/sripOzPtbRollOuiVAG/qybGGpSQR7Ex8+IHv1U7zDcGPEWZiOlB1CDjraE7BwB394ddrbVR8sdsJ+emdz8AQ7C4MsSbO/n2WCvAi+rf9TqrxA",
    "encSecKey": "5bdb98e77466535219da59404e70599e14f5b2bcc5f89da94cdd65c644e0e73e412d1e70fb9addd14f3c731680fe3d3c316fa8354974110a1e8a2fae56711bcc5025cd0f4f7aec91d3e13963ee90c6258c31e4ead8aa95e6997913f9a803f4edccf345a16c29bcb0fd72f46dcec96c5e4bd125a9f15cff216e0438ddd4f1af69"
}

resp = requests.post(url, headers=headers, data=data)

# 使用正则表达式提取歌曲名、作者和专辑名
pattern = r'"name":"(.*?)".*?"ar":\[{"id":\d+,"name":"(.*?)".*?"al":{"id":\d+,"name":"(.*?)"'
matches = re.findall(pattern, resp.text)

for match in matches:
    song_name, artist_name, album_name = match
    print(f"歌曲名: {song_name}, 作者: {artist_name}, 专辑名: {album_name}")
